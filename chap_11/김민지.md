# 11. 세 가지 전역 상태 라이브러리의 유사점과 차이점

## Zustand와 Redux의 차이점

### 공통점
단방향 데이터 흐름 기반 
- 데이터의 흐름을 단순화 하고 예측 가능하게 만든다.

### 차이점
상태 갱신 방식
- Redux: 리듀서를 사용해 상태 갱신 
  - 엄격한 만큼 예측 가능성이 높다.

- Zustand: 상태 갱신 방법에 제한이 없음
  - 상태 갱신 방법이 조금 더 간단할 수 있음 

디렉터리 구조
- Redux: features 디렉터리 구조를 따른다.
- Zustand: 제한이 없다.

스토어 생성 코드
- Redux: Immer를 기보능로 사용한다.
- Zustand: Immer 사용이 선택적이다.

상태 전파
- Redux: 컨텍스트를 사용한다.
  - 컨텍스트는 런타임에 스토어를 주입할 수 있어 일부 상황에서는 더 효과적이다.
- Zustand: 모듈 임포트를 사용한다. 컨텍스트는 선택적으로 지원한다.

### Redux는 제한이 좀 더 많고, 그래서 예측 가능성이 높다. 
### Zustand는 그에 비해 제한적이진 않지만 결국은 개발자가 모두 선택하고 처리해야 한다.

## Jotai와 Recoil의 차이점
### 공통점
atom 사용

### 차이점
key 문자열의 존재 유무
- Recoil: key 문자열이 존재한다.
  - key가 문자열이면 직렬화(stringify)가 쉽다.
- Jotai: key 문자열이 존재하지 않는다. WeakMap사용하고 객체의 참조를 key로 쓴다.

atom의 용도
- Recoil: 아톰 생성에만 사용한다.
- Jotai: 아톰 생성뿐만 아니라 selector기능까지 대체할 수 있다.

Provider
- Recoil: Provider 필요
- Jotai: Provider 없이 사용 가능
  - 장벽을 낮춰줄 수 있다.

## Valtio와 Mobx의 차이점

### 공통점
변경 가능 갱신 모델을 기반으로 한다.

### 차이점
갱신 방식
- MobX: 클래스 기반 (클래스로 함수 만들어서 함)
- Valtio: 객체 기반 (객체 안에 함수 만들어서 함)
  - 상태 객체외부에서 갱신 함수를 정의할 수도 있음

렌더링 최적화 방식
- MobX: 옵저버 방식 (observer 사용)
  -  예측 가능성이 더 높다.
- Valtio: 훅 방식 (useSnapshot 사용)
  - 동시성 렌더링에 더 친화적이다.

## Zustand, Jotai, Valtio 비교하기
| | Zustand | Jotai | Valtio |
|--|--------|-------|--------|
|상태 위치|모듈(리액트 외부에서 사용 가능)|컴포넌트|모듈(리액트 외부에서 사용 가능)|
|상태 갱신 방법|불변 상태(Immer 사용 가능)|불변 상태(Immer 사용 가능)|변경 가능 상태(해당 모델에선 Zustand + Immer 보다 나음)|